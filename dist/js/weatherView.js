var getWeekDay=function(a){switch(a){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 0:return"Sunday";default:return"SOMETHING IS WRONG HERE, toDay: "+a}},Weather=function(a){var b=new Date(a.from),c=new Date(a.to);this.timeString="",this.dayString="",this.setTimeAndDate(b,c),this.from=ko.observable(b),this.to=ko.observable(c),this.precipitation=ko.observable(a.precipitation.value),this.symbol=ko.observable("https://symbol.yr.no/grafikk/sym/b100/"+a.symbol["var"]+".png"),this.temperature=ko.observable(a.temperature.value+"â„ƒ"),this.windSpeed=ko.observable(a.windSpeed.name)};Weather.prototype.setTimeAndDate=function(a,b){var c=a.getHours(),d=b.getHours(),e=(c+4)%24,f=(d+4)%24,g=(a.getDay(),b.getDay()),h=a.getDate(),i=b.getDate(),j=h+Math.floor((c+4)/24),k=i+Math.floor((d+4)/24);a.setHours(e),b.setHours(f),a.setDate(j),b.setDate(k);var l=new Date(Date.now());g=b.getDay(),l.getDay()===g?this.dayString+="Today, ":(l.getDay()+1)%7===g&&(this.dayString+="Tomorrow, "),this.dayString+=getWeekDay(g),a.getHours()<10?this.timeString+="0"+a.getHours()+":00 - ":this.timeString+=a.getHours()+":00 - ",b.getHours()<10?this.timeString+="0"+b.getHours()+":00":this.timeString+=b.getHours()+":00"};var WeatherViewModel=function(a){this.creditLinkText=a.weatherdata.credit.link.text,this.creditLinkURL="http://www.yr.no/place/United_States/New_York/New_York/";var b=new Date(a.weatherdata.sun.rise);b.setHours((b.getHours()+4)%24);var c=new Date(a.weatherdata.sun.set);c.setHours((c.getHours()+4)%24),this.sunrise="Sunrise: "+b.toLocaleTimeString(),this.sunset="Sunset: "+c.toLocaleTimeString(),this.weatherForecast=[{name:"",counter:0,width:"33%",slotWidth:"33%",weather:[]},{name:"",counter:0,width:"33%",slotWidth:"33%",weather:[]},{name:"",counter:0,width:"33%",slotWidth:"33%",weather:[]}],this.setDateStrings();for(var d=a.weatherdata.forecast.tabular,e=0,f=10;e<f;e++)for(var g=new Weather(d[e]),h=0,i=this.weatherForecast.length;h<i;h++)this.weatherForecast[h].name===g.dayString&&(this.weatherForecast[h].weather.push(g),this.weatherForecast[h].counter++);for(var h=0;h<this.weatherForecast.length;h++){this.weatherForecast[h].width=25*this.weatherForecast[h].counter+"%";var j=100/this.weatherForecast[h].counter+"%";this.weatherForecast[h].weather.forEach(function(a){a.width=j}),0===this.weatherForecast[h].weather.length&&h>-1&&(this.weatherForecast.splice(h,1),h--)}};WeatherViewModel.prototype.setDateStrings=function(){var a=new Date(Date.now());todayDay=a.getDay(),this.weatherForecast[0].name="Today, "+getWeekDay(todayDay),this.weatherForecast[1].name="Tomorrow, "+getWeekDay((todayDay+1)%7),this.weatherForecast[2].name=getWeekDay((todayDay+2)%7)};